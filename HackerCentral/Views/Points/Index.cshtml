@model HackerCentral.ViewModels.PointsViewModel

@{
    ViewBag.Title = "Index";
}

<h2>Points</h2>

<a href="#createModal" role="button" class="btn btn-primary pull-right" data-toggle="modal">Add a Point</a>

@if (ViewBag.Message !="")
{
    <div class="alert alert-info">
        @ViewBag.Message
    </div>
}

@foreach (var p in Model.points)
{
    <div class="point">
        <h4>#@p.id: @p.summary</h4>
        <p>@p.full_text (@p.category.ToString())</p>
        <div class="actions">
            @Ajax.ActionLink("Edit", "EditForm", new { id = @p.id }, new AjaxOptions { InsertionMode = InsertionMode.Replace, UpdateTargetId = "editForm" }, new { @class="editLink" }) | 
            @Html.ActionLink("Delete", "Destroy", "Points", new { id = @p.id }, null) </div>
    </div>
}

<div id="editModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div id="editForm"></div>
</div>



 
<div id="createModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    @Html.Partial("_CreatePoint", @Model.point)
</div>





@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
    <script>
        $(".editLink").on("click", function () {
            $('#editModal').modal('show');
        });
    </script>
}
